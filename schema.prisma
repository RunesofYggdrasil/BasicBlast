generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url = env("POSTGRES_PRISMA_URL")
    directUrl = env("POSTGRES_URL_NON_POOLING")
}

model User {
    id Int @default(autoincrement()) @id
    username String @db.VarChar(32) @unique
    email String @unique
    password String
    posts Sequence[]
}

model Sequence {
    id Int @default(autoincrement()) @id
    name String
    species String
    brief String?
    description String?
    sequence String
    poster User @relation(fields: [posterID], references: [id])
    posterID Int
    date DateTime @default(now()) @updatedAt
    query Match[] @relation(name: "query")
    subject Match[] @relation(name: "subject")
}

model Match {
    id String @default(cuid()) @id
    comp String
    identities Int
    query Sequence @relation(name: "query", fields: [queryID], references: [id])
    queryID Int
    subject Sequence @relation(name: "subject", fields: [subjectID], references: [id])
    subjectID Int
}